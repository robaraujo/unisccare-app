{"version":3,"sources":["../../src/pages/register-page/register-page.module.ts","../../src/pages/register-page/register-page.ts"],"names":[],"mappings":"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","file":"17.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {RegisterPage} from './register-page';\nimport {TranslateModule} from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    RegisterPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RegisterPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    RegisterPage\n  ]\n})\nexport class RegisterPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register-page/register-page.module.ts","import {Component} from '@angular/core';\nimport {IonicPage, NavController, NavParams, MenuController, LoadingController} from 'ionic-angular';\nimport {Validators, FormBuilder, FormGroup} from '@angular/forms';\nimport {UserService} from '../../providers/user-service';\nimport { Global } from '../../helpers/global';\nimport moment from 'moment';\nimport { DatePicker } from '@ionic-native/date-picker';\nimport { StaffService } from '../../providers/staff-service';\n\n@IonicPage()\n@Component({\n  selector: 'page-register-page',\n  templateUrl: 'register-page.html',\n})\nexport class RegisterPage {\n\n  staffs: any;\n  private regData: FormGroup;\n\n  public dateOperation;\n  public dateEnd;\n  \n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private staffService: StaffService,\n    public menuCtrl: MenuController,\n    public global: Global,\n    private loadingCtrl: LoadingController,\n    public datePicker: DatePicker,\n    public formBuilder: FormBuilder,\n    public authService: UserService) {\n\n    this.regData = this.formBuilder.group({\n      first_name: ['', Validators.required],\n      last_name: ['', Validators.required],\n      email: ['', Validators.required],\n      password: ['', Validators.compose([Validators.required, Validators.minLength(6)])],\n      confirm_password: ['', Validators.compose([Validators.required, Validators.minLength(6)])],\n\n      first_weight: [''],\n      age: [''],\n      staff_id: [''],\n    });\n\n  }\n\n  ionViewDidLoad() {\n    //hide menu when on the login page, regardless of the screen resolution\n    this.menuCtrl.enable(false);\n\n    let loader = this.loadingCtrl.create();\n    loader.present();\n\n    this.staffService.list().subscribe(\n      (res:any)=> {\n        loader.dismiss();\n        this.staffs = res;\n      },\n      err=> {\n        loader.dismiss();\n      }\n    )\n  }\n\n  register() {\n\n    let form = this.regData.value;\n    \n    if (this.dateOperation) {\n      form.dt_operation = moment(this.dateOperation).format('YYYY-MM-DD');\n    }\n    if (this.dateEnd) {\n      form.dt_end = moment(this.dateEnd).format('YYYY-MM-DD');\n    }\n    \n    this.authService.register(form).subscribe(\n      res=> {\n        this.navCtrl.setRoot('JourneyPage').then(\n          res=> {\n            if (!res) return;\n            this.global.showMsg('Registro efetuado com sucesso.', 'success')\n            this.menuCtrl.enable(true);\n          }\n        )\n      },\n      err=> this.global.showMsg('Erro ao efetuar registro, tente mais tarde.', 'error')\n    );\n  }\n\n  /**\n   * \n   * @param attrDate (dateOperation or dateEnd) \n   */\n  openDatePicker(attrDate) {\n    this.datePicker.show({\n      date: new Date(),\n      mode: 'date',\n      androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK\n    }).then(\n      date => this[attrDate] = date,\n      err => console.log('Error occurred while getting date: ', err)\n    );\n  }\n\n  /**\n   * Return formated date to show in form as pt-bR\n   * @param date \n   */\n  getFormatedDate(date) {\n    if (!date) return null;\n\n    return moment(date).format('DD/MM/YYYY');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register-page/register-page.ts"],"sourceRoot":""}